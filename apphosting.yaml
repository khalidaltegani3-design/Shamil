# Firebase App Hosting Configuration
# Optimized for build success with Node.js compatibility

runConfig:
  cpu: 1
  memoryMiB: 1024
  maxInstances: 100
  minInstances: 0
  concurrency: 80

env:
  # Firebase Configuration
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: AIzaSyDKtxqu6YRoZQCeD9EoFmxAvc9JLi_d5R8
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: zoliapp-lite.firebaseapp.com
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: zoliapp-lite
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: zoliapp-lite.firebasestorage.app
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "476068628948"
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:476068628948:web:55c0eaf993de1cc553ee41

  # Runtime Environment Variables
  - variable: NODE_ENV
    value: production
  - variable: NODE_OPTIONS
    value: "--max-old-space-size=4096"

# Build configuration with enhanced compatibility
build:
  nodeVersion: 20
  environmentVariables:
    NODE_ENV: production
    NODE_OPTIONS: "--max-old-space-size=4096"
    NPM_CONFIG_FUND: "false"
    NPM_CONFIG_AUDIT: "false"
  commands:
    - npm ci --prefer-offline --no-audit --no-fund
    - npm run build
