# ูุธุงู ุงูุฃุฑูุงู ุงููุธูููุฉ - ุงูุชุญุฏูุซ ุงูุดุงูู

## ุชุงุฑูุฎ ุงูุชุญุฏูุซ: ${new Date().toLocaleDateString('ar-SA')}

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุชุญุฏูุซุงุช

ุชู ุชุทุจูู ูุธุงู ุดุงูู ููุฃุฑูุงู ุงููุธูููุฉ ูุชุญุณูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุชุญูู ูู ุงููููุฉ ุฏุงุฎููุงู.

## ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุฅุถุงูุฉ ุญูู ุงูุฑูู ุงููุธููู (Employee ID)

#### ุฃ) ุชุญุฏูุซ ูููุฐุฌ ุงูุจูุงูุงุช:
```typescript
interface UserData {
  uid: string;
  displayName: string;
  email: string;
  employeeId?: string; // ุงูุฑูู ุงููุธููู ุงูุฌุฏูุฏ
  role: 'employee' | 'supervisor' | 'admin' | 'system_admin';
  homeDepartmentId?: string;
  status: 'active' | 'inactive';
  createdAt: any;
  lastLoginAt?: any;
  isSystemAdmin?: boolean;
}
```

#### ุจ) ุชูุณูู ุงูุฑูู ุงููุธููู:
- **ุงูููุท**: `EMPxxxxxxxxx` (EMP + 9 ุฃุฑูุงู)
- **ูุซุงู**: `EMP123456789`
- **ุงูุชูุฑุฏ**: ูู ุฑูู ูุธููู ูุฑูุฏ ูู ุงููุธุงู

### 2. ููุชุจุฉ ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ (`src/lib/employee-utils.ts`)

#### ุงููุธุงุฆู ุงููุชุงุญุฉ:

1. **`generateEmployeeId()`**: ุชูููุฏ ุฑูู ูุธููู ุฌุฏูุฏ
2. **`validateEmployeeId(employeeId)`**: ุงูุชุญูู ูู ุตุญุฉ ุชูุณูู ุงูุฑูู
3. **`formatEmployeeId(employeeId)`**: ุชูุณูู ุงูุฑูู ููุนุฑุถ
4. **`isEmployeeIdUnique(users, employeeId, excludeUid)`**: ุงูุชุญูู ูู ุงูุชูุฑุฏ
5. **`hashEmployeeId(employeeId)`**: ุชุดููุฑ ุงูุฑูู ููุงุณุชุฎุฏุงู ุงูุฏุงุฎูู
6. **`generateCustomEmployeeId(department, rolePrefix)`**: ุฅูุดุงุก ุฑูู ูุฎุตุต

### 3. ุชุญุฏูุซ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (`src/app/admin/users/page.tsx`)

#### ุงูุชุญุณููุงุช ุงููุทุจูุฉ:

โ **ุฅุถุงูุฉ ุนููุฏ ุงูุฑูู ุงููุธููู**: ุนุฑุถ ูุฅุฏุงุฑุฉ ุงูุฃุฑูุงู ุงููุธูููุฉ
โ **ุงูุจุญุซ ุงููุญุณู**: ุงูุจุญุซ ุจุงูุงุณูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ุฃู ุงูุฑูู ุงููุธููู
โ **ุฅูุดุงุก ุฃุฑูุงู ุชููุงุฆูุฉ**: ูููุณุชุฎุฏููู ุงูุฐูู ูุง ูููููู ุฃุฑูุงู ูุธูููุฉ
โ **ุงูุชุญูู ูู ุงูุชูุฑุฏ**: ููุน ุงูุฃุฑูุงู ุงูููุฑุฑุฉ
โ **ุญุฐู ุฒุฑ ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน**: ุชูุธูู ุงููุงุฌูุฉ
โ **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ุฃูุถุญ ูุฃูุซุฑ ุชูุตููุงู

#### ุงููุงุฌูุฉ ุงูุฌุฏูุฏุฉ:
| ุงูุนููุฏ | ุงููุตู |
|--------|-------|
| ุงูุงุณู | ุงุณู ุงููุณุชุฎุฏู |
| **ุงูุฑูู ุงููุธููู** | ุงูุฑูู ุงููุธููู ุงููุฑูุฏ (ุฌุฏูุฏ) |
| ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| ุงูุฏูุฑ ุงูุญุงูู | ุฏูุฑ ุงููุณุชุฎุฏู |
| ุงููุณู | ุงููุณู ุงูุชุงุจุน ูู |
| ุงูุญุงูุฉ | ูุดุท/ูุนุทู |
| ุชุงุฑูุฎ ุงูุชุณุฌูู | ุชุงุฑูุฎ ุฅูุดุงุก ุงูุญุณุงุจ |
| ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ | ุฃุฒุฑุงุฑ ุงูุชุฑููุฉ/ุงูุชูุฒูู |
| ุตูุงุญูุงุช ุงูุฅุดุฑุงู | ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ุงูุฅุดุฑุงู |

### 4. ุชุญุฏูุซ ุตูุญุฉ ุงูุชุณุฌูู (`src/app/signup/page.tsx`)

#### ุงูุชุญุณููุงุช:
โ **ุฅูุดุงุก ุฑูู ูุธููู ุชููุงุฆูุงู**: ุนูุฏ ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
โ **ุงุณุชุฎุฏุงู ุงูููุชุจุฉ ุงููุณุงุนุฏุฉ**: ูุถูุงู ุงูุชูุฑุฏ ูุงูุตุญุฉ
โ **ุชุญุณูู ุนูููุฉ ุงูุชุณุฌูู**: ุฅุถุงูุฉ ุงูุฑูู ุงููุธููู ููุจูุงูุงุช ุงููุญููุธุฉ

```typescript
await setDoc(doc(db, "users", user.uid), {
  uid: user.uid,
  displayName: name,
  email: user.email,
  employeeId: employeeId, // ุงูุฑูู ุงููุธููู ุงูุฌุฏูุฏ
  role: "employee",
  homeDepartmentId: homeDepartmentId,
  createdAt: new Date(),
  status: "active",
});
```

### 5. ุฅุตูุงุญ ูุดุงูู ุชุญุฏูุซ ุงูุจูุงูุงุช

#### ุงููุดุงูู ุงูุชู ุชู ุญููุง:
- โ **ูุดู ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู**: ุชุญุณูู ูุนุงูุฌุฉ async/await
- โ **ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ**: ุฅุถุงูุฉ ุชูุงุตูู ุฃูุซุฑ ูู ุฑุณุงุฆู ุงูุฎุทุฃ
- โ **ุนุฏู ุธููุฑ ุงูุชุญุฏูุซุงุช**: ุชุญุณูู ุขููุฉ onSnapshot
- โ **ุชุถุงุฑุจ ูู ุงูุนูููุงุช**: ุชุญุณูู ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุญุฏูุซ

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:
- ุณูุชู ุฅูุดุงุก ุฑูู ูุธููู ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู
- ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู ุงูุฑูู ูุฏููุงู

### 2. ูููุณุชุฎุฏููู ุงูุญุงูููู:
- ุณูุชู ุฅูุดุงุก ุฃุฑูุงู ูุธูููุฉ ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุฅููุงููุฉ ุฅูุดุงุก ุงูุฑูู ูุฏููุงู ุจุงูููุฑ ุนูู ุฒุฑ "ุฅูุดุงุก ุฑูู"

### 3. ููุจุญุซ:
```
- ุงูุจุญุซ ุจุงูุงุณู: "ุฃุญูุฏ ูุญูุฏ"
- ุงูุจุญุซ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู: "ahmed@company.com"
- ุงูุจุญุซ ุจุงูุฑูู ุงููุธููู: "EMP123456789" ุฃู "123456789"
```

### 4. ูุฅุฏุงุฑุฉ ุงููุธุงู:
- ูุฏูุฑู ุงููุธุงู ูุง ูุญุชุงุฌูู ุฃุฑูุงู ูุธูููุฉ
- ุฅููุงููุฉ ุชุนุฏูู ุงูุฃุฑูุงู ุงููุธูููุฉ ูููุณุชุฎุฏููู
- ุงูุชุญูู ุงูุชููุงุฆู ูู ุงูุชูุฑุฏ

## ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### 1. ุงูุชุญูู ูู ุงูุชูุฑุฏ:
- ูุง ูููู ุฃู ูููู ูุณุชุฎุฏูุงู ููุณ ุงูุฑูู ุงููุธููู
- ุงูุชุญูู ุงูุชููุงุฆู ุนูุฏ ุงูุฅูุดุงุก ูุงูุชุนุฏูู

### 2. ุงูุชุดููุฑ:
- ุฅููุงููุฉ ุชุดููุฑ ุงูุฃุฑูุงู ุงููุธูููุฉ ููุงุณุชุฎุฏุงู ุงูุฏุงุฎูู
- ุงูุญูุงุธ ุนูู ุฎุตูุตูุฉ ุงูุจูุงูุงุช

### 3. ุงูุตูุงุญูุงุช:
- ูุฏูุฑ ุงููุธุงู ููุท ููููู ุชุนุฏูู ุงูุฃุฑูุงู ุงููุธูููุฉ
- ุงููุณุชุฎุฏููู ุงูุนุงุฏููู ูุง ูููููู ุชุนุฏูู ุฃุฑูุงููู

## ุงูููุงุฆุฏ ุงููุญููุฉ

1. **๐ ุฅุฏุงุฑุฉ ุฃูุถู**: ุชุญุฏูุฏ ุงููุณุชุฎุฏููู ุจุดูู ูุฑูุฏ
2. **๐ ุจุญุซ ูุญุณู**: ุฅููุงููุฉ ุงูุจุญุซ ุจุทุฑู ูุชุนุฏุฏุฉ
3. **๐ ุฃูุงู ุฃูุจุฑ**: ุชูููู ุงูุงุนุชูุงุฏ ุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุท
4. **๐ ุชุชุจุน ุฃุณูู**: ุฑุจุท ุงูุนูููุงุช ุจุงูุฃุฑูุงู ุงููุธูููุฉ
5. **๐ฏ ุฏูุฉ ุฃุนูู**: ุชุฌูุจ ุงูุฃุฎุทุงุก ูู ุชุญุฏูุฏ ุงููููุฉ

## ุงููููุงุช ุงููุญุฏุซุฉ

### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- `src/lib/employee-utils.ts` - ููุชุจุฉ ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ

### ุงููููุงุช ุงููุญุฏุซุฉ:
- `src/app/admin/users/page.tsx` - ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `src/app/signup/page.tsx` - ุตูุญุฉ ุงูุชุณุฌูู

## ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ุงูุชุณุฌูู:
1. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุชุณุฌูู
2. ุฃุฏุฎู ุงูุจูุงูุงุช ุงููุทููุจุฉ
3. ุชุญูู ูู ุฅูุดุงุก ุงูุฑูู ุงููุธููู ุชููุงุฆูุงู

### 2. ุงุฎุชุจุงุฑ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:
1. ุณุฌู ุฏุฎูู ููุฏูุฑ ูุธุงู
2. ุงูุชูู ุฅูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
3. ุชุญูู ูู ุธููุฑ ุนููุฏ ุงูุฑูู ุงููุธููู
4. ุฌุฑุจ ุงูุจุญุซ ุจุงูุฑูู ุงููุธููู

### 3. ุงุฎุชุจุงุฑ ุงูุนูููุงุช:
1. ุฌุฑุจ ุชุฑููุฉ/ุชูุฒูู ุงููุณุชุฎุฏููู
2. ุชุญูู ูู ุนุฏู ุธููุฑ ุฑุณุงุฆู ุฎุทุฃ
3. ุฑุงูุจ ูุญุฏุฉ ุงูุชุญูู ููุฑุณุงุฆู ุงูุชุดุฎูุตูุฉ

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุฅููุงููุงุช ููุชุญุณูู:
1. **๐ฑ ุจุงุฑููุฏ ููุฃุฑูุงู ุงููุธูููุฉ**: ูุณูููุฉ ุงููุณุญ
2. **๐ ุชูุงุฑูุฑ ุจุงูุฃุฑูุงู ุงููุธูููุฉ**: ุชุญูููุงุช ููุตูุฉ
3. **๐ ุชุงุฑูุฎ ุงูุชุนุฏููุงุช**: ุชุชุจุน ุชุบููุฑุงุช ุงูุฃุฑูุงู
4. **๐ข ุฃุฑูุงู ูุฎุตุตุฉ ุจุงูุฃูุณุงู**: ุฃุฑูุงู ุชุนูุณ ุงููุณู
5. **๐ ุชุตุฏูุฑ ุจูุงูุงุช ุงูููุธููู**: ูุน ุงูุฃุฑูุงู ุงููุธูููุฉ

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุซูู ูู: ${new Date().toLocaleString('ar-SA')}*

## ุฌูุฉ ุงูุงุชุตุงู

ููุงุณุชูุณุงุฑุงุช ุญูู ุงููุธุงู ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.